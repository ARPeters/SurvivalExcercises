{
    "contents" : "library(survival)\nlibrary(foreign)\n\n\n################################\n#CHAPTER 5: Practice\n################################\n\n#Read vets dataset\n#File Layout\n# Column 1: Treatment (standard = 1, test = 2)\n# Column 2: Cell type 1 (large = 1, other = 0)\n# Column 3: Cell type 2 (adeno = 1, other = 0)\n# Column 4: Cell type 3 (small = 1, other = 0)\n# Column 5: Cell type 4 (squamous = 1, other = 0)\n# Column 6: Survival time (days)\n# Column 7: Performance status (0 = worst, ..., 100 = best)\n# Column 8: disease duration (months)\n# Column 9: Age\n# Column 10: Prior therapy (none = 0, some = 10)\n# Column 11: Status (0 = censored, 1 = died)\n\ndsVets <- read.dta(\"http://web1.sph.emory.edu/dkleinb/allDatasets/surv2datasets/vets.dta\")\n\n\nnames(dsVets)<-c(\"Treatment\", \"LargeCell\", \"AdenoCell\", \"SmallCell\", \"SquamousCell\", \"SurvivalTime\", \"PerformanceStatus\", \n                 \"DiseaseDuration\", \"Age\", \"PriorTherapy\", \"Status\")\n\n###Question:  How do you make a variable \"readable\" with a space in the variable name:\n###           i.e. dsVets$Survival Time versus dsVets$SurvivalTime\n\n#Practice Question 1\n\n\nCh5Practice1a <- coxph(Surv(SurvivalTime, Status==1) ~ Treatment + LargeCell + AdenoCell + \n                        SmallCell + PerformanceStatus + DiseaseDuration + Age + PriorTherapy, data = dsVets, ties=\"breslow\")\nsummary(Ch5Practice1a)\n\n\nCh5Practice1b <- coxph(Surv(SurvivalTime, Status==1) ~ Treatment +  \n                         SmallCell + PerformanceStatus + DiseaseDuration + Age + PriorTherapy, data = dsVets, ties=\"breslow\")\nsummary(Ch5Practice1b)\n\n\n##Create New Variables Z1 Small cell\n##                     Z2 Performance Status High (60 or above) or Low (Below 60)\n\ndsVets$Z1 = dsVets$SmallCell\ndsVets$Z2 <- ifelse(dsVets$PerformanceStatus > 59, 1, 0)\n\n\n\nCh5Practice3 <- coxph(Surv(SurvivalTime, Status==1) ~ Treatment + DiseaseDuration + Age + PriorTherapy + strata(Z1, Z2), data = dsVets, ties=\"breslow\")\nsummary(Ch5Practice3)\n\n\n\nCh5Practice10 <- coxph(Surv(SurvivalTime, Status==1) ~ Treatment + DiseaseDuration + Age + PriorTherapy + \n                         DiseaseDuration:Z1 + Age:Z1 + PriorTherapy:Z1 + \n                         DiseaseDuration:Z2 + Age:Z2 + PriorTherapy:Z2 + \n                         DiseaseDuration:Z1:Z2 + Age:Z1:Z2 + PriorTherapy:Z1:Z2 + \n                         Treatment:Z1 + Treatment:Z1 + Treatment:Z1:Z2 + \n                         strata(Z1, Z2), data = dsVets, ties=\"breslow\")\nsummary(Ch5Practice10)\n\ncor(dsVets[,c()])\n\n\n\n",
    "created" : 1417534179397.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1476699426",
    "id" : "C9E16AB5",
    "lastKnownWriteTime" : 1418740262,
    "path" : "~/GitHub/SurvivalExercises/Thomas/Survival Analysis/Ch5Tables.R",
    "project_path" : "Thomas/Survival Analysis/Ch5Tables.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}