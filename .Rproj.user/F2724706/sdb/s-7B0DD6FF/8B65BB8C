{
    "contents" : "library(survival)\nlibrary(foreign)\n\nrm(list=ls(all=TRUE))\n################################\n#CHAPTER 6: Test\n################################\n\n\n#File Layout\n\n#  Column 1 = Rx (1=chemotherapy, 2=chemotherapy and radiation)\n#  Column 2 = status (0=censored, 1=died)\n#  Column 3 = survival time (days)\n\n#Read Anderson dataset\ndsChemo <- read.table(\"http://statweb.stanford.edu/~olshen/hrp262spring01/spring01Assignments/chemo.txt\", skip = 17)\n\nnames(dsChemo)<-c(\"Rx\", \"Status\", \"SurvTime\")\n#Test dsChemo\n\n#KM plots for each treatment group\nkmfit1 <- survfit(Surv(SurvTime, Status==1)~Rx, data=dsChemo)\nsummary(kmfit1)\nplot(kmfit1)\n\n\n#Test 2\nChemoPh<-coxph(Surv(SurvTime, Status==1)~Rx, data=dsChemo, ties=\"breslow\")\nsummary(ChemoPh)\n\n\n#Test 6 \n#start at page 646 of text as a reference\n\n#Chemo.cp=survSplit(dsChemo,cut=dsChemo$SurvTime[dsChemo$Status==1], end=\"SurvTime\", event=\"Status\", start=\"start\", id=\"id\")\n\n\nChemo.cp250 <- survSplit(dsChemo, cut=250, end=\"SurvTime\", event=\"Status\", start=\"start\", id=\"id\")                   \n\nChemo.cp250=Chemo.cp250[order(Chemo.cp250$id, Chemo.cp250$start,])]\n\n\nChemo.cp250$Time1 <- Chemo.cp250$Rx*(Chemo.cp250$start<250)\nChemo.cp250$Time2 <- Chemo.cp250$Rx*(Chemo.cp250$start>=250)\n\n\nY250=Surv(Chemo.cp250$start, Chemo.cp250$SurvTime, Chemo.cp250$Status)\n\nChemoPh2<-coxph(Y250~Time1 +  Time2, data=Chemo.cp250)\n\nsummary(ChemoPh2)\n\n\n\n##Why doesn't this give the same answer as above?\nChemoPh3<-coxph(Surv(Chemo.cp250$start, Chemo.cp250$SurvTime, Chemo.cp250$Status)~Time1 +  Time2, data=Chemo.cp250)\n\nsummary(ChemoPh3)\n\n\n\n#Test 3\n\nChemo.cp250500 <- survSplit(dsChemo, cut=c(250, 500), end=\"SurvTime\", event=\"Status\", start=\"start\", id=\"id\")                   \n\n\nChemo.cp250500$Time1 <- Chemo.cp250500$Rx*(Chemo.cp250500$start<250)\nChemo.cp250500$Time2 <- Chemo.cp250500$Rx*(Chemo.cp250500$start>=250 & Chemo.cp250500$start<500)\nChemo.cp250500$Time3 <- Chemo.cp250500$Rx*(Chemo.cp250500$start>=500)\n\n\nY250500=Surv(Chemo.cp250500$start, Chemo.cp250500$SurvTime, Chemo.cp250500$Status)\n\nChemoPh4<-coxph(Y250500~Time1 +  Time2 + Time3 + cluster(id), data=Chemo.cp250500)\n\nsummary(ChemoPh4)\n\n\n\n##Why doesn't this give the same answer as above?\nChemoPh5<-coxph(Surv(Chemo.cp250500$start, Chemo.cp250500$SurvTime, Chemo.cp250500$Status)~Time1 +  Time2 + Time3, data=Chemo.cp250500)\n\nsummary(ChemoPh5)\n\n\n\n",
    "created" : 1423580492135.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1648971483",
    "id" : "8B65BB8C",
    "lastKnownWriteTime" : 1423588307,
    "path" : "~/GitHub/SurvivalExercises/Thomas/Survival Analysis/Ch6Tables.R",
    "project_path" : "Thomas/Survival Analysis/Ch6Tables.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}